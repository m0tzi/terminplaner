<!DOCTYPE html>
<html lang="en">

<head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="CSS/Test.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http - equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        var Token;
        var Endpoint = "http://localhost/cgi-bin/Test.exe";


        function getCookie(name) {
            var value = "; " + document.cookie;
            var parts = value.split("; " + name + "=");
            if (parts.length == 2) return parts.pop().split(";").shift();
        }

        function CallServer(parameter) {
            var Prom = jQuery.Deferred();
            $.ajax({
                url: Endpoint,
                method: "Post",
                data: parameter
            }).done(function(data) {
                console.log("ERFOLG");
                console.log(data);
                Prom.resolve(data);
            }).fail(function(data) {
                console.log("Misserfolg");
                console.log(data);
                Prom.reject();
            });
            return Prom.promise();
        }

        function RemoveDate() {

        }
        // function CreateDate() {
        //     var parameter = {
        //         "Token": Token,
        //         "Desc": $("#Desc").val(),
        //         "Time": $("#Time").val(),
        //         "DateName": $("#DateName").val(),
        //         "Befehl": "CreateDate"
        //     }
        //     CallServer(parameter);
        // }

        function GetDates() {
            console.log("Token benutzt:");
            console.log("Ld_QoNAbkMHIPHunlRkfEKXhCYG-_hcEPsyECVaPjuuyhqmSqibczThsoweqtLcccfW_lAfKDlAjuhjxGdaYtknxMLUkGDNLEcxYrOYQYPuggjCRvxMaNkqntCpcBbbBPcOvypUidHImOZciMCKCruJXruEfOBGJikOyTQiFxZDjynK_iCokIcCvKCYxooppyRkiQzXx");


            var parameter = {
                "Token": "Ld_QoNAbkMHIPHunlRkfEKXhCYG-_hcEPsyECVaPjuuyhqmSqibczThsoweqtLcccfW_lAfKDlAjuhjxGdaYtknxMLUkGDNLEcxYrOYQYPuggjCRvxMaNkqntCpcBbbBPcOvypUidHImOZciMCKCruJXruEfOBGJikOyTQiFxZDjynK_iCokIcCvKCYxooppyRkiQzXx",
                "Befehl": "GetDates"
            }
            CallServer(parameter);
        }

        function CreateUser() {
            var parameter = {
                "Username": $("#UsernameEnter").val(),
                "Password": $("#PasswordEnter").val(),
                "Befehl": "CreateUser"
            }
            $.when(CallServer(parameter)).done(function(data) {
                Token = data.Server;
                createDashboard();
            });
        }

        function RemoveDate() {
            var parameter = {
                "Befehl": "DeleteDate",
                "ID": "NsnPUdnoSyhTWGaU-MVX_PS_OAolUQvlADfeLoUYSTnunUtGIDkKReGJGRF_PhCPbwmkvylKDSmxMiLvSheCLqdpXpDAocLwHcyoODFSHpFdRClMsla-HAQmrYGJwWShwLcs-HvOewRvKibUpmjCdeVPyXPwFkEWwpMiLeU-bMtRWTKxzzWREopZRLJtJISDtDLFQIK",
            }
            $.when(CallServer(parameter)).done(function(data) {
                console.log(data);
            }).fail(function(data) {
                console.log(data);
            })
        }

        function ModifyDate() {
            var parameter = {
                "Befehl": "ModifyDate",
                "ID": "KqnaTsF-UqTdNbSFIsbqfgPEjBzWShQFBqDFHVfPmrRTfUgiFxkqkvlpErPSxKqfRA-yrYaCcD_vLjHfWMNqGBbBX_dYTJtfArvBQZDszQYNGMtPEAfKlzVZIgFujteYqwxmrLHPHNXG-oEryu_sTVaJtBlnW_qOLewdFYmnJUWodtOVhzBqllLnTBHjPYAxgOAeTybS",
                "Time": "Letzte Woche Samstag",
                "DateName": "Ich wurde verändert",
                "Desc": "Ich liebe Gruppenarbeiten. Ich mein, ich hatte mal sowas wie Motivation, aber hey. Solange man sich die Gute Note abstauben kann nicht wahr?"
            }
            $.when(CallServer(parameter)).done(function(data) {
                console.log(data);
            }).fail(function(data) {
                console.log(data);
            })
        }

        function CreateDate() {
            var parameter = {
                "Befehl": "CreateDate",
                "Token": "Ld_QoNAbkMHIPHunlRkfEKXhCYG-_hcEPsyECVaPjuuyhqmSqibczThsoweqtLcccfW_lAfKDlAjuhjxGdaYtknxMLUkGDNLEcxYrOYQYPuggjCRvxMaNkqntCpcBbbBPcOvypUidHImOZciMCKCruJXruEfOBGJikOyTQiFxZDjynK_iCokIcCvKCYxooppyRkiQzXx",
                "Time": "Naechste Woche Dienstag",
                "DateName": "DerLustigeMannAusDemInternet",
                "Desc": "Hier ist der Lustig Mann aus dem Internet"
            }
            $.when(CallServer(parameter)).done(function(data) {
                console.log(data);
            }).fail(function(data) {
                console.log(data);
            })
        }

        function GetToken() {
            var parameter = {
                "Username": $("#UsernameEnter").val(),
                "Password": $("#PasswordEnter").val(),
                "Befehl": "GetToken"
            }
            $.when(CallServer(parameter)).done(function(data) {
                Token = data.Server;
                createDashboard();
            });
        }

        async function createDashboard() {
            $.when(GetDates()).done(function() {

            });
            $(".CenterMe").addClass("hide");
            $(".Dashboard").removeClass("hide");
        }
        $(document).ready(function() {
            //WIP
        })
    </script>
</head>

<body>
    <div class="CenterMe">
        <div class="Startpage">
            <div class="inputs">
                <input type="text" placeholder="Username" id="UsernameEnter" />
                <input type="password" placeholder="Password" id="PasswordEnter" />
            </div>
            <div class="inputs">
                <button onclick="GetToken()">
                    Login
                </button>
                <button onclick="CreateUser()">
                    Register
                </button>
            </div>
        </div>
    </div>

    <div class="Dashboard hide">
        <div class="Userdata">

        </div>
        <div class="Logout">
            <img src="https://img.pngio.com/close-delete-door-exit-log-out-logout-remove-icon-png-close-the-door-512_512.png" alt="logout" class="logoutimg" />
        </div>
        <div class="Main">
            <div class="Befehle">
                <div class="content" onclick="CreateDate()">WIP<br>Add Date</div>
                <div class="content" onclick="ModifyDate()">WIP<br>Modify Date</div>
                <div class="content" onclick="RemoveDate()">WIP<br>Remove Date</div>
            </div>
            <div class="displayDates">
                <div class="content">
                    <p class="title">
                        Überschrift
                    </p>
                    <p class="desc">
                        Lorem ipsum dolor sit amet consectetur adipisicing elit. Quos nesciunt doloremque consectetur debitis quam dignissimos cupiditate quidem aliquid alias! Id culpa animi aliquid! Optio soluta nesciunt consectetur aliquam dolor provident?
                    </p>
                    <p class="Datum">11.1.2019</p>

                </div>
                <div class="content"></div>
                <div class="content"></div>
                <div class="content"></div>
                <div class="content"></div>
                <div class="content"></div>
                <div class="content"></div>
                <div class="content"></div>

            </div>
        </div>
    </div>

</body>

</html>